<script>
    // Mobile menu open/close
    const burger = document.querySelector('.hamburger');
    const menu = document.querySelector('.mobile-menu');
    const overlay = document.querySelector('.overlay');
    const closeBtn = document.querySelector('.close-btn');

    function closeMobileMenu() {
      menu.classList.remove('open');
      overlay.classList.remove('show');
    }

    if (burger) {
      burger.addEventListener('click', () => {
        menu.classList.toggle('open');
        overlay.classList.toggle('show');
      });
    }

    if (overlay) {
      overlay.addEventListener('click', closeMobileMenu);
    }

    if (closeBtn) {
      closeBtn.addEventListener('click', closeMobileMenu);
    }

    // Mobile accordion toggles
    const toggles = document.querySelectorAll('.mobile-menu .menu-toggle');
    toggles.forEach(btn => {
      btn.addEventListener('click', () => {
        const group = btn.closest('.menu-group');
        const nowOpen = group.classList.toggle('open');
        btn.setAttribute('aria-expanded', nowOpen ? 'true' : 'false');
      });
      // keyboard support
      btn.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          btn.click();
        }
      });
    });

    // Close mobile menu when a leaf link is clicked
    const mobileLinks = document.querySelectorAll('.mobile-menu a[href]');
    mobileLinks.forEach(a => {
      a.addEventListener('click', () => {
        closeMobileMenu();
      });
    });
  </script>